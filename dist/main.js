!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}function r(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(r)?r:r+""}var n=function(){return e=function e(t,r){var n=t.name,o=t.link;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=n,this._link=o,this._handleCardClick=r},(r=[{key:"_createTagWithClass",value:function(e,t){var r=document.createElement(e);return r.classList.add(t),r}},{key:"_deleteCard",value:function(e){e.target.parentNode.parentNode.remove()}},{key:"_liked",value:function(e){e.target.classList.contains("gallery__like-image_black")?e.target.classList.remove("gallery__like-image_black"):e.target.classList.add("gallery__like-image_black")}},{key:"renderCard",value:function(){var e=this,t=this._createTagWithClass("div","gallery__card"),r=this._createTagWithClass("button","gallery__delete-button");t.appendChild(r),r.addEventListener("click",this._deleteCard);var n=this._createTagWithClass("img","gallery__delete-image");r.appendChild(n);var o=this._createTagWithClass("img","gallery__card-image");o.setAttribute("src",this._link),t.appendChild(o),o.setAttribute("alt",this._name),o.addEventListener("click",(function(){e._handleCardClick({link:e._link,name:e._name})}));var i=this._createTagWithClass("div","gallery__wrapper-text-and-like-button");t.appendChild(i);var u=this._createTagWithClass("p","gallery__card-name");i.appendChild(u),u.innerText=this._name;var a=this._createTagWithClass("button","gallery__like-button");return i.appendChild(a),a.addEventListener("click",this._liked),t}}])&&t(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r}();function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function u(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}var a=function(){return e=function e(t){var r,n,o,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=function(e){"Escape"===e.key&&i.close()},(n=u(n="_handleEscClose"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this._popup=document.querySelector(t),this._closeButton=this._popup.querySelector(".popup__close-button")},(t=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),this._popup.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),this._popup.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListener",value:function(){var e=this;this._closeButton.addEventListener("click",(function(){return e.close()}))}}])&&i(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function f(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}function p(e,t,r){return t=m(t),function(e,t){if(t&&("object"==l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,r||[],m(e).constructor):t.apply(e,r))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},y.apply(null,arguments)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}var v=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=p(this,t,[e]))._image=r._popup.querySelector(".popup-view-image__render-image"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(t,e),r=t,(n=[{key:"open",value:function(e,r){y(m(t.prototype),"open",this).call(this),this._image.setAttribute("src",e),this._image.setAttribute("alt",r)}}])&&c(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function h(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}function g(e,t,r){return t=k(t),function(e,t){if(t&&("object"==d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,S()?Reflect.construct(t,r||[],k(e).constructor):t.apply(e,r))}function S(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(S=function(){return!!e})()}function w(){return w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},w.apply(null,arguments)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}var P=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=g(this,t,[e]))._form=n._popup.querySelector(".popup__form"),n._submitCallback=r,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(t,e),r=t,(n=[{key:"_getInputValues",value:function(){return Array.from(this._popup.querySelectorAll(".popup__input")).map((function(e){return e.value}))}},{key:"setEventListener",value:function(){var e=this;w(k(t.prototype),"setEventListener",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault();var r=e._getInputValues();e._submitCallback(r),e._form.reset(),e.close()}))}},{key:"close",value:function(){w(k(t.prototype),"close",this).call(this),this._form.reset()}}])&&_(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,C(n.key),n)}}function C(e){var t=function(e,t){if("object"!=O(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==O(t)?t:t+""}var T=function(){return e=function e(t,r){var n=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=n,this._renderer=o,this._container=document.querySelector(r)},(t=[{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.append(e)}}])&&E(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,R(n.key),n)}}function R(e){var t=function(e,t){if("object"!=q(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==q(t)?t:t+""}var A=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._form=document.querySelector(t.formSelector),this._inputs=this._form.querySelectorAll(t.inputSelector),this._button=this._form.querySelector(t.buttonSelector),this._errorClass=this._form.querySelectorAll(t.errorSelector)},t=[{key:"_checkInputs",value:function(){Array.from(this._inputs).some((function(e){return!1===e.validity.valid}))?this._button.disabled=!0:this._button.disabled=!1}},{key:"enableValidation",value:function(){var e=this;this._inputs.forEach((function(t){t.addEventListener("input",(function(r){var n=Array.from(e._errorClass).find((function(e){return e.id==="".concat(t.id,"-error")}));e._checkInputs(),r.target.validity.valid?n.textContent="":n.textContent=r.target.validationMessage}))}))}}],t&&L(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,N(n.key),n)}}function N(e){var t=function(e,t){if("object"!=I(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==I(t)?t:t+""}var W=function(){return e=function e(t){var r=t.selectorName,n=t.selectorRole;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileName=document.querySelector(r),this._profileRole=document.querySelector(n)},(t=[{key:"getUserInfo",value:function(){return{name:this._profileName.textContent,role:this._profileRole.textContent}}},{key:"setUserInfo",value:function(e,t){this._profileName.textContent=e,this._profileRole.textContent=t}}])&&x(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,u,a=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}document.querySelector(".profile__edit-button"),document.querySelector("#close-profile"),document.querySelector("#close-add-card"),document.querySelector(".profile__button-more"),document.querySelector(".gallery"),document.querySelector(".popup-view-image__close-button"),document.querySelector(".popup__form").addEventListener("submit",(function(e){e.preventDefault();var t=document.querySelector("#input-name"),r=document.querySelector("#input-role"),n=document.querySelector(".profile__name"),o=document.querySelector(".profile__role");n.textContent=t.value,o.textContent=r.value,closePopUp()})),new A({formSelector:".popup__form",inputSelector:".popup__input",buttonSelector:".popup__save-button",errorSelector:".popup__form-error"}).enableValidation(),new A({formSelector:".popup-add-card-form",inputSelector:".popup__input",buttonSelector:".popup__save-button",errorSelector:".popup__form-error"}).enableValidation();var U=new v(".popup-view-image");U.setEventListener();var V=new T({items:[{name:"Serra da Estrela - PT",link:"../images/Serra-da-Estrela.jpg"},{name:"Gerês - PT",link:"../images/Gerês.jpg"},{name:"Nazaré - PT",link:"../images/Nazaré.jpg"},{name:"Santos - SP",link:"../images/Santos.jpg"},{name:"Porto - PT",link:"../images/porto.jpg"},{name:"Gaia - PT",link:"../images/familia.jpg"}],renderer:function(e){var t=new n(e,(function(e){var t=e.name,r=e.link;U.open(r,t)})).renderCard();V.addItem(t)}},".gallery");V.renderItems();var G=new W({selectorName:".profile__name",selectorRole:".profile__role"}),z=new P(".popup",(function(e){var t=B(e,2),r=t[0],n=t[1];G.setUserInfo(r,n)}));z.setEventListener(),document.querySelector(".profile__edit-button").addEventListener("click",(function(){z.open()}));var M=new P(".popup-add-card",(function(e){var t=B(e,2),r=t[0],o=t[1],i=new n({name:r,link:o},(function(e){var t=e.name,r=e.link;U.open(r,t)})).renderCard();V.addItem(i)}));M.setEventListener(),document.querySelector(".profile__button-more").addEventListener("click",(function(){M.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SCxFQUNsQixHQUNDLFlBRUhGLEVBQVFNLGNBRVIsSUFBTUMsRUFBVyxJQUFJeEIsRUFBUyxDQUFFQyxhQUFjLGlCQUFrQkMsYUFBYyxtQkFFeEV1QixFQUFtQixJQUFJdEUsRUFBYyxVQUFVLFNBQUF1RSxHQUFrQixJQUFBQyxFQUFBQyxFQUFBRixFQUFBLEdBQWhCL0gsRUFBSWdJLEVBQUEsR0FBRXRCLEVBQUlzQixFQUFBLEdBQy9ESCxFQUFTSyxZQUFZbEksRUFBTTBHLEVBQzdCLElBRUFvQixFQUFpQlQsbUJBRWF6RyxTQUFTNkIsY0FBYyx5QkFFL0JmLGlCQUFpQixTQUFTLFdBQzlDb0csRUFBaUJMLE1BQ25CLElBRUEsSUFBTVUsRUFBZSxJQUFJM0UsRUFBYyxtQkFBbUIsU0FBQTRFLEdBQTBCLElBQUFDLEVBQUFKLEVBQUFHLEVBQUEsR0FBeEJFLEVBQVFELEVBQUEsR0FBRUUsRUFBUUYsRUFBQSxHQUt0RUcsRUFIVSxJQUFJM0ksRUFETixDQUFDRyxLQUFNc0ksRUFBVXJJLEtBQU1zSSxJQUNMLFNBQUFFLEdBQW1CLElBQWhCekksRUFBSXlJLEVBQUp6SSxLQUFNQyxFQUFJd0ksRUFBSnhJLEtBQ3ZDbUgsRUFBZUssS0FBS3hILEVBQU1ELEVBQzVCLElBQytCMEgsYUFDL0JKLEVBQVFLLFFBQVFhLEVBQ2hCLElBR0ZMLEVBQWFkLG1CQUVhekcsU0FBUzZCLGNBQWMseUJBQy9CZixpQkFBaUIsU0FBUyxXQUMxQ3lHLEVBQWFWLE1BQ2YsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3Rlc3RlNS8uL3NyYy9jYXJkLmpzIiwid2VicGFjazovL3Rlc3RlNS8uL3NyYy9wb3B1cC5qcyIsIndlYnBhY2s6Ly90ZXN0ZTUvLi9zcmMvcG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vdGVzdGU1Ly4vc3JjL3BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vdGVzdGU1Ly4vc3JjL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vdGVzdGU1Ly4vc3JjL2VuYWJsZVZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vdGVzdGU1Ly4vc3JjL3VzZXJpbmZvLmpzIiwid2VicGFjazovL3Rlc3RlNS8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBsaW5rIH0sIGhhbmRsZUNhcmRDbGljaykge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgfVxuXG4gIF9jcmVhdGVUYWdXaXRoQ2xhc3ModGFnLCBjbGFzc05hbWUpIHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICAgIHJldHVybiBlbGVtZW50O1xuICB9XG5cbiAgX2RlbGV0ZUNhcmQoZXZlbnQpIHtcbiAgICBldmVudC50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnJlbW92ZSgpO1xuICB9XG5cbiAgX2xpa2VkKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJnYWxsZXJ5X19saWtlLWltYWdlX2JsYWNrXCIpKSB7XG4gICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImdhbGxlcnlfX2xpa2UtaW1hZ2VfYmxhY2tcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuYWRkKFwiZ2FsbGVyeV9fbGlrZS1pbWFnZV9ibGFja1wiKTtcbiAgICB9O1xuICB9XG5cbiAgcmVuZGVyQ2FyZCgpIHtcbiAgICBjb25zdCBpbml0aWFsQ2FyZCA9IHRoaXMuX2NyZWF0ZVRhZ1dpdGhDbGFzcygnZGl2JywgXCJnYWxsZXJ5X19jYXJkXCIpO1xuICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NyZWF0ZVRhZ1dpdGhDbGFzcygnYnV0dG9uJywgXCJnYWxsZXJ5X19kZWxldGUtYnV0dG9uXCIpO1xuICAgIGluaXRpYWxDYXJkLmFwcGVuZENoaWxkKGRlbGV0ZUJ1dHRvbik7XG4gICAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9kZWxldGVDYXJkKTtcblxuICAgIGNvbnN0IGRlbGV0ZUltYWdlQnV0dG9uID0gdGhpcy5fY3JlYXRlVGFnV2l0aENsYXNzKCdpbWcnLCBcImdhbGxlcnlfX2RlbGV0ZS1pbWFnZVwiKTtcbiAgICBkZWxldGVCdXR0b24uYXBwZW5kQ2hpbGQoZGVsZXRlSW1hZ2VCdXR0b24pO1xuXG4gICAgY29uc3QgaW1hZ2VHYWxsZXJ5ID0gdGhpcy5fY3JlYXRlVGFnV2l0aENsYXNzKCdpbWcnLCAnZ2FsbGVyeV9fY2FyZC1pbWFnZScpO1xuICAgIGltYWdlR2FsbGVyeS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgdGhpcy5fbGluayk7XG4gICAgaW5pdGlhbENhcmQuYXBwZW5kQ2hpbGQoaW1hZ2VHYWxsZXJ5KTtcbiAgICBpbWFnZUdhbGxlcnkuc2V0QXR0cmlidXRlKFwiYWx0XCIsIHRoaXMuX25hbWUpO1xuICAgIGltYWdlR2FsbGVyeS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh7bGluazogdGhpcy5fbGluayAsIG5hbWU6IHRoaXMuX25hbWV9KTtcbiAgICB9KTtcblxuXG4gICAgY29uc3Qgd3JhcHBlck5hbWVNb3JlQnV0dG9uID0gdGhpcy5fY3JlYXRlVGFnV2l0aENsYXNzKCdkaXYnLCAnZ2FsbGVyeV9fd3JhcHBlci10ZXh0LWFuZC1saWtlLWJ1dHRvbicpO1xuICAgIGluaXRpYWxDYXJkLmFwcGVuZENoaWxkKHdyYXBwZXJOYW1lTW9yZUJ1dHRvbik7XG5cbiAgICBjb25zdCBpbWFnZU5hbWUgPSB0aGlzLl9jcmVhdGVUYWdXaXRoQ2xhc3MoJ3AnLCAnZ2FsbGVyeV9fY2FyZC1uYW1lJyk7XG4gICAgd3JhcHBlck5hbWVNb3JlQnV0dG9uLmFwcGVuZENoaWxkKGltYWdlTmFtZSk7XG4gICAgaW1hZ2VOYW1lLmlubmVyVGV4dCA9IHRoaXMuX25hbWU7XG5cbiAgICBjb25zdCBsaWtlQnV0dG9uID0gdGhpcy5fY3JlYXRlVGFnV2l0aENsYXNzKCdidXR0b24nLCAnZ2FsbGVyeV9fbGlrZS1idXR0b24nKTtcbiAgICB3cmFwcGVyTmFtZU1vcmVCdXR0b24uYXBwZW5kQ2hpbGQobGlrZUJ1dHRvbik7XG4gICAgbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fbGlrZWQpO1xuXG4gICAgcmV0dXJuIGluaXRpYWxDYXJkO1xuICB9XG4gfSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3Ipe1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZS1idXR0b25cIik7XG4gIH1cblxuICBvcGVuKCl7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpe1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XG4gICAgdGhpcy5fcG9wdXAucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXIoKXtcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcbiAgfVxufVxuXG5cblxuIiwiaW1wb3J0ICBQb3B1cCAgZnJvbSBcIi4vcG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yKXtcbiAgICBzdXBlcihzZWxlY3RvcilcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtdmlldy1pbWFnZV9fcmVuZGVyLWltYWdlXCIpO1xuICB9XG5cbiAgb3BlbihsaW5rLCBsZWdlbmQpe1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl9pbWFnZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgbGluayk7XG4gICAgdGhpcy5faW1hZ2Uuc2V0QXR0cmlidXRlKFwiYWx0XCIsIGxlZ2VuZCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCAgZnJvbSBcIi4vcG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3IsIHN1Ym1pdENhbGxiYWNrKXtcbiAgICBzdXBlcihzZWxlY3RvcilcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcbiAgICB0aGlzLl9zdWJtaXRDYWxsYmFjayA9IHN1Ym1pdENhbGxiYWNrO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCl7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIikpLm1hcCgoaW5wdXQpID0+IGlucHV0LnZhbHVlKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXIoKXtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVyKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0IHZhbHVlcyA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XG4gICAgICB0aGlzLl9zdWJtaXRDYWxsYmFjayh2YWx1ZXMpO1xuICAgICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7aXRlbXMsIHJlbmRlcmVyfSwgc2VjdGlvblNlbGVjdG9yKXtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWN0aW9uU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KXtcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRpb24ge1xuICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcbiAgICB0aGlzLl9mb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihwYXJhbXMuZm9ybVNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbnB1dHMgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwocGFyYW1zLmlucHV0U2VsZWN0b3IpO1xuICAgIHRoaXMuX2J1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihwYXJhbXMuYnV0dG9uU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwocGFyYW1zLmVycm9yU2VsZWN0b3IpO1xuICB9XG5cbiAgIF9jaGVja0lucHV0cygpIHtcbiAgICBpZiAoKEFycmF5LmZyb20odGhpcy5faW5wdXRzKS5zb21lKChpKSA9PiBpLnZhbGlkaXR5LnZhbGlkID09PSBmYWxzZSkpKSB7XG4gICAgICB0aGlzLl9idXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpKSA9PiB7XG4gICAgICBpLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBBcnJheS5mcm9tKHRoaXMuX2Vycm9yQ2xhc3MpLmZpbmQoKGVycm9yKSA9PiBlcnJvci5pZCA9PT0gYCR7aS5pZH0tZXJyb3JgKTtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dHMoKTtcbiAgICAgICAgaWYoIWUudGFyZ2V0LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICAgICAgZXJyb3IudGV4dENvbnRlbnQgPSBlLnRhcmdldC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlcnJvci50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pXG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3Ioe3NlbGVjdG9yTmFtZSwgc2VsZWN0b3JSb2xlfSl7XG4gICAgdGhpcy5fcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yTmFtZSk7XG4gICAgdGhpcy5fcHJvZmlsZVJvbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yUm9sZSk7XG4gIH1cblxuICBnZXRVc2VySW5mbygpe1xuICAgIHJldHVybiB7bmFtZTogdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQsIHJvbGU6IHRoaXMuX3Byb2ZpbGVSb2xlLnRleHRDb250ZW50fTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKG5ld05hbWUsIG5ld1JvbGUpe1xuICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gbmV3TmFtZTtcbiAgICB0aGlzLl9wcm9maWxlUm9sZS50ZXh0Q29udGVudCA9IG5ld1JvbGU7XG4gIH1cbn0iLCJpbXBvcnQgXCIuL3N0eWxlcy9pbmRleC5jc3NcIlxuaW1wb3J0ICBDYXJkICBmcm9tIFwiLi9jYXJkLmpzXCI7XG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4vcG9wdXAuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSAgZnJvbSBcIi4vcG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtICBmcm9tIFwiLi9wb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgRW5hYmxlVmFsaWRhdGlvbiBmcm9tIFwiLi9lbmFibGVWYWxpZGF0aW9uLmpzXCJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi91c2VyaW5mby5qc1wiO1xuY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xuY29uc3QgY2xvc2VQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Nsb3NlLXByb2ZpbGUnKTtcbmNvbnN0IGNsb3NlQWRkQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjbG9zZS1hZGQtY2FyZCcpO1xuY29uc3QgYnV0dG9uTW9yZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19idXR0b24tbW9yZScpO1xuY29uc3QgZ2FsbGVyeUNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlcIik7XG5jb25zdCBwb3BVcENsb3NlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC12aWV3LWltYWdlX19jbG9zZS1idXR0b25cIilcbmNvbnN0IGZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XG5cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGV2dCkge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpbnB1dC1uYW1lJyk7XG4gICAgY29uc3Qgam9iSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaW5wdXQtcm9sZScpO1xuICAgIGNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX25hbWUnKTtcbiAgICBjb25zdCBwcm9maWxlUm9sZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19yb2xlJyk7XG4gICAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBuYW1lSW5wdXQudmFsdWU7XG4gICAgcHJvZmlsZVJvbGUudGV4dENvbnRlbnQgPSBqb2JJbnB1dC52YWx1ZTtcbiAgICBjbG9zZVBvcFVwKCk7XG59XG5cbmZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcblxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJTZXJyYSBkYSBFc3RyZWxhIC0gUFRcIixcbiAgICBsaW5rOiBcIi4uL2ltYWdlcy9TZXJyYS1kYS1Fc3RyZWxhLmpwZ1wiXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkdlcsOqcyAtIFBUXCIsXG4gICAgbGluazogXCIuLi9pbWFnZXMvR2Vyw6pzLmpwZ1wiXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIk5hemFyw6kgLSBQVFwiLFxuICAgIGxpbms6IFwiLi4vaW1hZ2VzL05hemFyw6kuanBnXCJcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiU2FudG9zIC0gU1BcIixcbiAgICBsaW5rOiBcIi4uL2ltYWdlcy9TYW50b3MuanBnXCJcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiUG9ydG8gLSBQVFwiLFxuICAgIGxpbms6IFwiLi4vaW1hZ2VzL3BvcnRvLmpwZ1wiXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkdhaWEgLSBQVFwiLFxuICAgIGxpbms6IFwiLi4vaW1hZ2VzL2ZhbWlsaWEuanBnXCJcbiAgfVxuXTtcblxuY29uc3QgZm9ybUVkaXRQcm9maWxlID0gbmV3IEVuYWJsZVZhbGlkYXRpb24oXG4gIHtcbiAgICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxuICAgIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcbiAgICBidXR0b25TZWxlY3RvcjogJy5wb3B1cF9fc2F2ZS1idXR0b24nLFxuICAgIGVycm9yU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0tZXJyb3InLFxuICB9XG4pXG5cbmZvcm1FZGl0UHJvZmlsZS5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IGZvcm1JbWFnZXMgPSBuZXcgRW5hYmxlVmFsaWRhdGlvbih7XG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cC1hZGQtY2FyZC1mb3JtJyxcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxuICBidXR0b25TZWxlY3RvcjogJy5wb3B1cF9fc2F2ZS1idXR0b24nLFxuICBlcnJvclNlbGVjdG9yOiAnLnBvcHVwX19mb3JtLWVycm9yJyxcbn0pXG5cbmZvcm1JbWFnZXMuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5wb3B1cC12aWV3LWltYWdlXCIpO1xucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcigpO1xuXG5jb25zdCBnYWxsZXJ5ID0gbmV3IFNlY3Rpb24oe1xuICBpdGVtczogaW5pdGlhbENhcmRzLFxuICByZW5kZXJlcjogKGltYWdlKSA9PiB7XG4gICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGltYWdlLCAoe25hbWUsIGxpbmt9KSA9PiB7XG4gICAgICBwb3B1cFdpdGhJbWFnZS5vcGVuKGxpbmssIG5hbWUpXG4gICAgfSlcbiAgICBjb25zdCBjYXJkQnVpbGRlZCA9IGNhcmQucmVuZGVyQ2FyZCgpO1xuICAgIGdhbGxlcnkuYWRkSXRlbShjYXJkQnVpbGRlZCk7XG4gIH1cbn0sIFwiLmdhbGxlcnlcIik7XG5cbmdhbGxlcnkucmVuZGVySXRlbXMoKTtcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oeyBzZWxlY3Rvck5hbWU6IFwiLnByb2ZpbGVfX25hbWVcIiwgc2VsZWN0b3JSb2xlOiBcIi5wcm9maWxlX19yb2xlXCJ9KTtcblxuY29uc3QgcG9wdXBFZGl0UHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwXCIsIChbbmFtZSwgcm9sZV0pID0+IHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8obmFtZSwgcm9sZSk7XG59KTtcblxucG9wdXBFZGl0UHJvZmlsZS5zZXRFdmVudExpc3RlbmVyKCk7XG5cbmNvbnN0IG9wZW5FZGl0UHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xuXG5vcGVuRWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIHBvcHVwRWRpdFByb2ZpbGUub3BlbigpO1xufSk7XG5cbmNvbnN0IHBvcHVwQWRkQ2FyZCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwLWFkZC1jYXJkXCIsIChbY2FyZE5hbWUsIGNhcmRMaW5rXSkgPT4ge1xuICBjb25zdCBpbWFnZSA9IHtuYW1lOiBjYXJkTmFtZSwgbGluazogY2FyZExpbmt9O1xuICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoaW1hZ2UsICh7IG5hbWUsIGxpbmt9KSA9PiB7XG4gICAgcG9wdXBXaXRoSW1hZ2Uub3BlbihsaW5rLCBuYW1lKVxuICB9KTtcbiAgY29uc3QgbmV3Q2FyZEJ1aWxkZWQgPSBuZXdDYXJkLnJlbmRlckNhcmQoKTtcbiAgZ2FsbGVyeS5hZGRJdGVtKG5ld0NhcmRCdWlsZGVkKTtcbiAgfVxuKTtcblxucG9wdXBBZGRDYXJkLnNldEV2ZW50TGlzdGVuZXIoKTtcblxuY29uc3Qgb3BlbkFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYnV0dG9uLW1vcmUnKTtcbm9wZW5BZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBwb3B1cEFkZENhcmQub3BlbigpO1xufSk7Il0sIm5hbWVzIjpbIkNhcmQiLCJfcmVmIiwiaGFuZGxlQ2FyZENsaWNrIiwibmFtZSIsImxpbmsiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl9oYW5kbGVDYXJkQ2xpY2siLCJrZXkiLCJ2YWx1ZSIsInRhZyIsImNsYXNzTmFtZSIsImVsZW1lbnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJldmVudCIsInRhcmdldCIsInBhcmVudE5vZGUiLCJyZW1vdmUiLCJjb250YWlucyIsIl90aGlzIiwiaW5pdGlhbENhcmQiLCJfY3JlYXRlVGFnV2l0aENsYXNzIiwiZGVsZXRlQnV0dG9uIiwiYXBwZW5kQ2hpbGQiLCJhZGRFdmVudExpc3RlbmVyIiwiX2RlbGV0ZUNhcmQiLCJkZWxldGVJbWFnZUJ1dHRvbiIsImltYWdlR2FsbGVyeSIsInNldEF0dHJpYnV0ZSIsIndyYXBwZXJOYW1lTW9yZUJ1dHRvbiIsImltYWdlTmFtZSIsImlubmVyVGV4dCIsImxpa2VCdXR0b24iLCJfbGlrZWQiLCJQb3B1cCIsInNlbGVjdG9yIiwiZXZ0IiwiY2xvc2UiLCJfcG9wdXAiLCJxdWVyeVNlbGVjdG9yIiwiX2Nsb3NlQnV0dG9uIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl90aGlzMiIsIlBvcHVwV2l0aEltYWdlIiwiX1BvcHVwIiwiX2NhbGxTdXBlciIsIl9pbWFnZSIsIl9pbmhlcml0cyIsImxlZ2VuZCIsIl9nZXQiLCJfZ2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJjYWxsIiwiUG9wdXBXaXRoRm9ybSIsInN1Ym1pdENhbGxiYWNrIiwiX2Zvcm0iLCJfc3VibWl0Q2FsbGJhY2siLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwibWFwIiwiaW5wdXQiLCJwcmV2ZW50RGVmYXVsdCIsInZhbHVlcyIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiU2VjdGlvbiIsInNlY3Rpb25TZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZm9yRWFjaCIsIml0ZW0iLCJhcHBlbmQiLCJGb3JtVmFsaWRhdGlvbiIsInBhcmFtcyIsImZvcm1TZWxlY3RvciIsIl9pbnB1dHMiLCJpbnB1dFNlbGVjdG9yIiwiX2J1dHRvbiIsImJ1dHRvblNlbGVjdG9yIiwiX2Vycm9yQ2xhc3MiLCJlcnJvclNlbGVjdG9yIiwic29tZSIsImkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiZGlzYWJsZWQiLCJlIiwiZXJyb3IiLCJmaW5kIiwiaWQiLCJjb25jYXQiLCJfY2hlY2tJbnB1dHMiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiVXNlckluZm8iLCJzZWxlY3Rvck5hbWUiLCJzZWxlY3RvclJvbGUiLCJfcHJvZmlsZU5hbWUiLCJfcHJvZmlsZVJvbGUiLCJyb2xlIiwibmV3TmFtZSIsIm5ld1JvbGUiLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsInByb2ZpbGVOYW1lIiwicHJvZmlsZVJvbGUiLCJjbG9zZVBvcFVwIiwiRW5hYmxlVmFsaWRhdGlvbiIsImVuYWJsZVZhbGlkYXRpb24iLCJwb3B1cFdpdGhJbWFnZSIsInNldEV2ZW50TGlzdGVuZXIiLCJnYWxsZXJ5IiwiaW1hZ2UiLCJjYXJkQnVpbGRlZCIsIm9wZW4iLCJyZW5kZXJDYXJkIiwiYWRkSXRlbSIsInJlbmRlckl0ZW1zIiwidXNlckluZm8iLCJwb3B1cEVkaXRQcm9maWxlIiwiX3JlZjIiLCJfcmVmMyIsIl9zbGljZWRUb0FycmF5Iiwic2V0VXNlckluZm8iLCJwb3B1cEFkZENhcmQiLCJfcmVmNCIsIl9yZWY1IiwiY2FyZE5hbWUiLCJjYXJkTGluayIsIm5ld0NhcmRCdWlsZGVkIiwiX3JlZjYiXSwic291cmNlUm9vdCI6IiJ9